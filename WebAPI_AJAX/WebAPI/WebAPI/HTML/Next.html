<!DOCTYPE html>
<html>
<head>
    <title>Falmingo taxi</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Content-Type" content="text/html;charset=UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <script src="../../Scripts/jquery-1.10.2.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="../Content/NextStyle.css" rel="stylesheet" />
   
    <script type="text/javascript">

        function getEnumStatus(id) {
            switch (id) {
                case 0: return "Kreirana";
                case 1: return "Formirana";
                case 2: return "Obradjena";
                case 3: return "Prihvacena";
                case 4: return "Otkazana";
                case 5: return "Neuspesna";
                case 6: return "Uspesna";
                case 7: return "Utoku";
            }
        }

        function getEnumTipAutomobila(id) {
            switch (id) {
                case 0: return "Svejedno";
                case 1: return "Putnicki";
                case 2: return "Kombi";

            }
        }
        function getEnumPol(id) {
            switch (id) {
                case 0: return "Zenski";
                case 1: return "Muski";
            }
        }

        $(document).ready(function () {
            $("#profil").hide();
            $("#korisnik").css("display", "none");
            $("#dispecer").css("display", "none");
            $("#vozac").css("display", "none");
            $("#dugmeIzmeni").hide();
            $('#dodajVozaca').hide();
            $('#promeniLokaciju').hide();
            $('#naruciVoznju').hide();
            $('#dodavanjeKorisnikaDiv').hide();
            $("#dugmeDodajVozaca").hide();
            $("#formiranjeVoznjeDispecer").hide();
            $("#dugmePromeniLokacijuDiv").hide();
            $("#promeniLokacijuDiv").hide();
            $("#naruciVoznjuDiv").hide();
            $("#dugmeNaruciVoznjuDiv").hide();
            $(".dropdown").hide();
            $("#fitriranjeVoznji").hide();
            $("#dispecerPretraga").hide();

            var uloga = '';
            var korisnikovAJDI = '';
            let korisnik1 = "";

            var ime = localStorage.getItem("korisnik");
            $("#NaslovK").text(ime);

            let korisnik = {
                Kime: `${ime}`,
            };
    
        $.ajax({
            type: 'PUT',
            url: '/api/Prijava/' + 0,
            data: JSON.stringify(korisnik),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (data) {
                korisnikovAJDI = data.id;
                korisnik1 = data;
               uloga = data.uloga;
               if (data.uloga == 0) {
                   alert("Musterija logovana");
                   $("#korisnik").css("display", "block");
                   $("#korisnik").css("clear", "both");
                   $("#korisnik").css("position", "sticky");
                   $("#fitriranjeVoznji").show();

                   $('#naruciVoznju').show();

                   $.ajax({
                       type: 'GET',
                       url: '/api/Voznja',
                       success: function (data) {
                           if (data.legth != 0) {
                               let sviPoz = 0;
                               for (var v in data) {
                                   if (data[v].StatusVoznje == 0 || (data[v].StatusVoznje == 6 && data[v].Komentar.Opis == " ")) {
                                       sviPoz = 1;
                                       break;
                                   }
                               }

                               let korisnikoveVoznje = 0;
                               for (var v in data) {
                                   if (data[v].idKorisnik == korisnikovAJDI)
                                       korisnikoveVoznje = 1;
                               }

                               if (korisnikoveVoznje == 1) {
                                   let tabelaVoznji = `<table border='1'><tr><th>Id voznje</th><th  width="200px">Datum i vreme</th><th width="300px">Lokacija</th>`;
                                   tabelaVoznji += "<th>Odrediste</td><th>Iznos</th>";
                                   tabelaVoznji += "<th>Komentar</th>";
                                   tabelaVoznji += "<th>Tip automobila</th> <th>Status voznje</th>"
                                   if (sviPoz == 0) {
                                       tabelaVoznji += `</tr>`;
                                   }
                                   else {
                                       tabelaVoznji += "<th colspan =\"2\"></th></tr>";
                                   }



                                   /////////////////////////////////////////////////////////////////
                                   for (voznja in data) {
                                       if (data[voznja].idKorisnik == korisnikovAJDI) {
                                           var currentdate = new Date(Date.parse(data[voznja].DatumVreme));

                                           var datum =
                                               currentdate.getUTCFullYear() + "/" +
                                               ("0" + (currentdate.getUTCMonth() + 1)).slice(-2) + "/" +
                                               ("0" + currentdate.getUTCDate()).slice(-2);

                                           var vreme = ("0" + currentdate.getUTCHours()).slice(-2) + ":" +
                                               ("0" + currentdate.getUTCMinutes()).slice(-2);
                                           tabelaVoznji += `<tr>
                                                                <td>${data[voznja].Id}</td>
                                                                <td>${datum} u ${vreme}h</td>
                                                                <td>

                                                                ${data[voznja].Lokacija.Adresa.UlicaBroj},
                                                               ${data[voznja].Lokacija.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Lokacija.Adresa.PozivniBrojMesta}
                                                               </td>`;


                                           if (data[voznja].Iznos != "0") {
                                               tabelaVoznji += `<td>

                                                                ${data[voznja].Odrediste.Adresa.UlicaBroj},
                                                               ${data[voznja].Odrediste.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Odrediste.Adresa.PozivniBrojMesta}
                                                                    </td>
                                                                    <td>${data[voznja].Iznos}</td>`;
                                           }
                                           else {
                                               tabelaVoznji += `<td></td>
                                                                    <td></td>`;
                                           }

                                           if (data[voznja].Komentar.Ocena == "1" || data[voznja].Komentar.Ocena == "2" || data[voznja].Komentar.Ocena == "3" || data[voznja].Komentar.Ocena == "4" || data[voznja].Komentar.Ocena == "5") {
                                               tabelaVoznji += `<td><textarea rows="4" cols="30" disabled>Korisnicko ime:${data[voznja].Komentar.idKorisnik}\nTekst:${data[voznja].Komentar.Opis}\nOcena:${data[voznja].Komentar.Ocena}\nDatum:${data[voznja].Komentar.DatumObjave}</textarea></td>`;

                                           } else {
                                               tabelaVoznji += `<td> </td>`;

                                           }


                                           tabelaVoznji += `<td>${getEnumTipAutomobila(data[voznja].Automobil)}</td>
                                                                <td>${getEnumStatus(data[voznja].StatusVoznje)}</td>
                                                                `;
                                           if (data[voznja].StatusVoznje == 0) {


                                               tabelaVoznji += `
                                                                <td><button id="otkaziVoznju" value="${data[voznja].Id}">Odustani</button></td>
                                                                <td><button id="izmeniVoznju" value="${data[voznja].Id}">Izmeni</button></td>
                                                                    </tr>`;
                                           }
                                           else if (data[voznja].StatusVoznje == 2) {
                                               tabelaVoznji += `                                                                
                                                                <td align="center" colspan="2"><button id="izmeniVoznju" value="${data[voznja].Id}">Izmeni</button></td>
                                                                    </tr>`;
                                           }

                                           else if (data[voznja].StatusVoznje == 6 && data[voznja].Komentar.Opis == " ") {
                                               tabelaVoznji += `                                                                
                                                                <td align="center" colspan="2"><button id="korisnikDodajKomentar" value="${data[voznja].Id}">Dodaj komentar</button></td>
                                                                    </tr>`;


                                           }

                                           else {
                                               if (sviPoz == 0) {
                                                   tabelaVoznji += `</tr>`;
                                               }
                                               else {
                                                   tabelaVoznji += `
                                                                <td colspan=\"2\"></td>
                                                                    </tr>`;
                                               }
                                           }
                                       }
                                   }
                                   tabelaVoznji += "</table>";
                                   $("#tabelaVoznji").html(tabelaVoznji);

                               }
                               else {
                                   $("#tabelaVoznji").html("<h3 align=\"center\">Nemate voznje</h3>");

                               }


                           }
                       }
                   })
               }
               else if (data.Uloga == 1)
               {
                   alert("Dispecer logovan");
                   $('#dodajVozaca').show();
                   $(".dropdown").show();
                   $("#dispecerPretraga").show();

                   $("#dispecer").css("display", "block");
                   $("#dispecer").css("clear", "both");
                   $("#dispecer").css("position", "sticky");

                   $.ajax({
                       type: 'GET',
                       url: '/api/Voznja',//ajdidispecera
                       success: function (data) {
                           let imaDispecer = 0;
                           for (voznja in data) {
                               if (data[voznja].idDispecer == korisnikovAJDI)
                                   imaDispecer = 1;
                           }
                           if (data.length == 0) {
                               $("#tabelaVoznjiDispecera").html("<h4 align=\"center\">Trenutno nemate ni jenu voznju :)</h4>");

                           } else {
                               if (imaDispecer == 1) {
                                   let tabelaVoznji = `<table border='1'><tr><th>Id voznje</th><th  width="200px">Datum i vreme</th><th width="300px">Lokacija</th>`;
                                   tabelaVoznji += "<th>Odrediste</td><th>Iznos</th>";
                                   tabelaVoznji += "<th>Komentar</th>";
                                   tabelaVoznji += "<th>Tip automobila</th> <th>Status voznje</th></tr>";

                                   for (voznja in data) {
                                       if (data[voznja].idDispecer == korisnikovAJDI) {
                                           var currentdate = new Date(Date.parse(data[voznja].DatumVreme));

                                           var datum =
                                               currentdate.getUTCFullYear() + "/" +
                                               ("0" + (currentdate.getUTCMonth() + 1)).slice(-2) + "/" +
                                               ("0" + currentdate.getUTCDate()).slice(-2);

                                           var vreme = ("0" + currentdate.getUTCHours()).slice(-2) + ":" +
                                               ("0" + currentdate.getUTCMinutes()).slice(-2);
                                           tabelaVoznji += `<tr>
                                                                <td>${data[voznja].Id}</td>
                                                                <td>${datum} u ${vreme}h</td>
                                                                <td>

                                                                ${data[voznja].Lokacija.Adresa.UlicaBroj},
                                                               ${data[voznja].Lokacija.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Lokacija.Adresa.PozivniBrojMesta}
                                                               </td>`;


                                           if (data[voznja].Iznos != "0") {
                                               tabelaVoznji += `<td>

                                                                ${data[voznja].Odrediste.Adresa.UlicaBroj},
                                                               ${data[voznja].Odrediste.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Odrediste.Adresa.PozivniBrojMesta}
                                                                    </td>
                                                                    <td>${data[voznja].Iznos}</td>`;
                                           } else {
                                               tabelaVoznji += `<td></td>
                                                                    <td></td>`;
                                           }

                                           if (data[voznja].Komentar.Ocena == "1" || data[voznja].Komentar.Ocena == "2" || data[voznja].Komentar.Ocena == "3" || data[voznja].Komentar.Ocena == "4" || data[voznja].Komentar.Ocena == "5") {
                                               tabelaVoznji += `<td><textarea rows="4" cols="30" disabled>Korisnicko ime:${data[voznja].Komentar.idKorisnik}\nTekst:${data[voznja].Komentar.Opis}\nOcena:${data[voznja].Komentar.Ocena}\nDatum:${data[voznja].Komentar.DatumObjave}</textarea></td>`;

                                           } else {
                                               tabelaVoznji += `<td> </td>`;

                                           }
                                           tabelaVoznji += `<td>${getEnumTipAutomobila(data[voznja].Automobil)}</td>
                                                                <td>${getEnumStatus(data[voznja].StatusVoznje)}</td></tr>
                                                                `;

                                       }
                                   }
                                   tabelaVoznji += "</table>";
                                   $("#tabelaVoznjiDispecera").html(tabelaVoznji);

                               }

                               else {
                                   $("#tabelaVoznjiDispecera").html("<h3 align=\"center\">Trenitno nemate voznji</h3>");

                               }
                           }
                       }
                   })
                   $.ajax({
                       type: 'GET',
                       url: '/api/Voznja',
                       success: function (data) {


                           if (data.length == 0) {
                               $("#tabelaVoznjiDispecera").html("<h4 align=\"center\">Trenutno nema voznji u sistemu :)</h4>");

                           } else {
                               let tabelaVoznji = `<table border='1'><tr><th>Id voznje</th><th  width="200px">Datum i vreme</th><th width="300px">Lokacija</th>`;
                               tabelaVoznji += "<th>Odrediste</td><th>Iznos</th>";
                               tabelaVoznji += "<th>Komentar</th>";
                               tabelaVoznji += "<th>Tip automobila</th> <th>Status voznje</th></tr>";
                               for (voznja in data) {
                                   var currentdate = new Date(Date.parse(data[voznja].DatumVreme));

                                   var datum =
                                       currentdate.getUTCFullYear() + "/" +
                                       ("0" + (currentdate.getUTCMonth() + 1)).slice(-2) + "/" +
                                       ("0" + currentdate.getUTCDate()).slice(-2);

                                   var vreme = ("0" + currentdate.getUTCHours()).slice(-2) + ":" +
                                       ("0" + currentdate.getUTCMinutes()).slice(-2);
                                   tabelaVoznji += `<tr>
                                                                <td>${data[voznja].Id}</td>
                                                                <td>${datum} u ${vreme}h</td>
                                                                <td>

                                                                ${data[voznja].Lokacija.Adresa.UlicaBroj},
                                                               ${data[voznja].Lokacija.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Lokacija.Adresa.PozivniBrojMesta}
                                                               </td>`;


                                   if (data[voznja].Iznos != "0") {
                                       tabelaVoznji += `<td>

                                                                ${data[voznja].Odrediste.Adresa.UlicaBroj},
                                                               ${data[voznja].Odrediste.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Odrediste.Adresa.PozivniBrojMesta}
                                                                    </td>
                                                                    <td>${data[voznja].Iznos}</td>`;
                                   } else {
                                       tabelaVoznji += `<td></td>
                                                                    <td></td>`;
                                   }

                                   if (data[voznja].Komentar.Ocena == "1" || data[voznja].Komentar.Ocena == "2" || data[voznja].Komentar.Ocena == "3" || data[voznja].Komentar.Ocena == "4" || data[voznja].Komentar.Ocena == "5") {
                                       tabelaVoznji += `<td><textarea rows="4" cols="30" disabled>Korisnicko ime:${data[voznja].Komentar.idKorisnik}\nTekst:${data[voznja].Komentar.Opis}\nOcena:${data[voznja].Komentar.Ocena}\nDatum:${data[voznja].Komentar.DatumObjave}</textarea></td>`;

                                   } else {
                                       tabelaVoznji += `<td> </td>`;

                                   }
                                   tabelaVoznji += `<td>${getEnumTipAutomobila(data[voznja].Automobil)}</td>
                                                                <td>${getEnumStatus(data[voznja].StatusVoznje)}</td></tr>
                                                                `;

                               }
                               tabelaVoznji += "</table>";
                               $("#tabelaSvihVoznji").html(tabelaVoznji);
                           }



                       }
                   })

                }
               else if (data.Uloga == 2) {
                   alert("Vozac logovana");
                   $("#lala").hide();
                   $("#lala1").hide();
                   $("#lala2").hide();
                   $('#promeniLokaciju').show();

                   $("#vozac").css("display", "block");
                   $("#vozac").css("clear", "both");
                   $("#vozac").css("position", "sticky");


                   $.ajax({
                       type: 'GET',
                       url: '/api/Voznja',
                       success: function (data) {

                           let ima = 0;
                           for (voznja in data) {
                               if (data[voznja].idVozac == korisnikovAJDI)
                                   ima = 1;
                           }

                           if (ima != 1) {
                               $("#tabelaVoznjiVozaca").html("<h3 align=\"center\">Nemate ni jednu voznju</h3>");
                           } else {

                               let tabelaVoznji = `<table border='1'><tr><th>Id</th><th>Musterija</th><th>Vozac</th><th>Dispecer</th><th width="200px">Datum i vreme</th><th width="300px">Lokacija</th>`;
                               tabelaVoznji += "<th>Odrediste</td><th>Iznos</th>";
                               tabelaVoznji += "<th>Komentar</th>";
                               tabelaVoznji += "<th>Tip automobila</th> <th>Status voznje</th><th colspan =\"2\"></th></tr>";

                               for (voznja in data) {
                                   if (data[voznja].idVozac == korisnikovAJDI) {

                                       var currentdate = new Date(Date.parse(data[voznja].DatumVreme));

                                       var datum =
                                           currentdate.getUTCFullYear() + "/" +
                                           ("0" + (currentdate.getUTCMonth() + 1)).slice(-2) + "/" +
                                           ("0" + currentdate.getUTCDate()).slice(-2);

                                       var vreme = ("0" + currentdate.getUTCHours()).slice(-2) + ":" +
                                           ("0" + currentdate.getUTCMinutes()).slice(-2);
                                       tabelaVoznji += `<tr>
                                                                <td>${data[voznja].Id}</td>`;

                                       if (data[voznja].idKorisnik != " ") {
                                           $.ajax({
                                               type: 'GET',
                                               url: '/api/Korisnik/' + data[voznja].idKorisnik,
                                               async: false,
                                               success: function (data) {
                                                   tabelaVoznji += `<td>${data.Ime} ${data.Prezime}</td>`;
                                               }
                                           })

                                       } else {
                                           tabelaVoznji += `<td>${data[voznja].idKorisnik}</td>`;
                                       }



                                       if (data[voznja].idVozac != " ") {
                                           $.ajax({
                                               type: 'GET',
                                               url: '/api/Vozac/' + data[voznja].idVozac,
                                               async: false,
                                               success: function (data) {
                                                   tabelaVoznji += `<td>${data.Ime} ${data.Prezime}</td>`;
                                               }
                                           })

                                       } else {
                                           tabelaVoznji += `<td>${data[voznja].idVozac}</td>`;
                                       }




                                       if (data[voznja].idDispecer != " ") {
                                           $.ajax({
                                               type: 'GET',
                                               url: '/api/Dispecer/' + data[voznja].idDispecer,
                                               async: false,
                                               success: function (data) {
                                                   tabelaVoznji += `<td>${data.Ime} ${data.Prezime}</td>`;
                                               }
                                           })

                                       } else {
                                           tabelaVoznji += `<td>${data[voznja].idDispecer}</td>`;
                                       }

                                       tabelaVoznji += `<td>${datum} u ${vreme}h</td>
                                                                <td>

                                                                ${data[voznja].Lokacija.Adresa.UlicaBroj},
                                                               ${data[voznja].Lokacija.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Lokacija.Adresa.PozivniBrojMesta}
                                                               </td>`;


                                       if (data[voznja].Iznos != "0") {
                                           tabelaVoznji += `<td>

                                                                ${data[voznja].Odrediste.Adresa.UlicaBroj},
                                                               ${data[voznja].Odrediste.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Odrediste.Adresa.PozivniBrojMesta}
                                                                    </td>
                                                                    <td>${data[voznja].Iznos}</td>`;
                                       } else {
                                           tabelaVoznji += `<td></td>
                                                                    <td></td>`;
                                       }

                                       if (data[voznja].Komentar.Ocena == "1" || data[voznja].Komentar.Ocena == "2" || data[voznja].Komentar.Ocena == "3" || data[voznja].Komentar.Ocena == "4" || data[voznja].Komentar.Ocena == "5") {
                                           tabelaVoznji += `<td><textarea rows="4" cols="30" disabled>Korisnicko ime:${data[voznja].Komentar.idKorisnik}\nTekst:${data[voznja].Komentar.Opis}\nOcena:${data[voznja].Komentar.Ocena}\nDatum:${data[voznja].Komentar.DatumObjave}</textarea></td>`;

                                       } else {
                                           tabelaVoznji += `<td> </td>`;

                                       }
                                       tabelaVoznji += `<td>${getEnumTipAutomobila(data[voznja].Automobil)}</td>
                                                                <td>${getEnumStatus(data[voznja].StatusVoznje)}</td>
                                                                `;

                                       tabelaVoznji += `<td><button value="${data[voznja].Id}" id="neuspesnaDugme">Neuspesna</button></td><td><button value="${data[voznja].Id}" id="uspesnaDugme">Uspesna</button></td></tr>`;
                                   }

                               }
                               $("#tabelaVoznjiVozaca").html(tabelaVoznji);
                           }

                           let imaSlob = 0;
                           for (voznja in data) {
                               if (data[voznja].StatusVoznje == 0)
                                   imaSlob = 1;
                           }

                           if (imaSlob != 1) {
                               $("#tabelaVoznjiNaCekanju").html("<h4 align=\"center\">Trenutno nema voznji u na cekanju :)</h4>");
                           } else {
                               let tabelaVoznji = `<table border='1'><tr><th>Id</th><th>Musterija</th><th>Vozac</th><th>Dispecer</th><th  width="200px">Datum i vreme</th><th width="300px">Lokacija</th>`;
                               tabelaVoznji += "<th>Odrediste</td><th>Iznos</th>";
                               tabelaVoznji += "<th>Komentar</th>";
                               tabelaVoznji += "<th>Tip automobila</th> <th>Status voznje</th><th></th></tr>";

                               for (voznja in data) {
                                   if (data[voznja].StatusVoznje == 0) {
                                       var currentdate = new Date(Date.parse(data[voznja].DatumVreme));

                                       var datum =
                                           currentdate.getUTCFullYear() + "/" +
                                           ("0" + (currentdate.getUTCMonth() + 1)).slice(-2) + "/" +
                                           ("0" + currentdate.getUTCDate()).slice(-2);

                                       var vreme = ("0" + currentdate.getUTCHours()).slice(-2) + ":" +
                                           ("0" + currentdate.getUTCMinutes()).slice(-2);
                                       tabelaVoznji += `<tr>
                                                                <td>${data[voznja].Id}</td>`;

                                       if (data[voznja].idKorisnik != " ") {
                                           $.ajax({
                                               type: 'GET',
                                               url: '/api/Korisnik/' + data[voznja].idKorisnik,
                                               async: false,
                                               success: function (data) {
                                                   tabelaVoznji += `<td>${data.Ime} ${data.Prezime}</td>`;
                                               }
                                           })

                                       } else {
                                           tabelaVoznji += `<td>${data[voznja].idKorisnik}</td>`;
                                       }



                                       if (data[voznja].idVozac != " ") {
                                           $.ajax({
                                               type: 'GET',
                                               url: '/api/Vozac/' + data[voznja].idVozac,
                                               async: false,
                                               success: function (data) {
                                                   tabelaVoznji += `<td>${data.Ime} ${data.Prezime}</td>`;
                                               }
                                           })

                                       } else {
                                           tabelaVoznji += `<td>${data[voznja].idVozac}</td>`;
                                       }




                                       if (data[voznja].idDispecer != " ") {
                                           $.ajax({
                                               type: 'GET',
                                               url: '/api/Dispecer/' + data[voznja].idDispecer,
                                               async: false,
                                               success: function (data) {
                                                   tabelaVoznji += `<td>${data.Ime} ${data.Prezime}</td>`;
                                               }
                                           })

                                       } else {
                                           tabelaVoznji += `<td>${data[voznja].idDispecer}</td>`;
                                       }

                                       tabelaVoznji += `<td>${datum} u ${vreme}h</td>
                                                                <td>
                                                                ${data[voznja].Lokacija.Adresa.UlicaBroj},
                                                               ${data[voznja].Lokacija.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Lokacija.Adresa.PozivniBrojMesta}
                                                               </td>`;


                                       if (data[voznja].Iznos != "0") {
                                           tabelaVoznji += `<td>

                                                                ${data[voznja].Odrediste.Adresa.UlicaBroj},
                                                               ${data[voznja].Odrediste.Adresa.NaseljenoMesto},
                                                                ${data[voznja].Odrediste.Adresa.PozivniBrojMesta}
                                                                    </td>
                                                                    <td>${data[voznja].Iznos}</td>`;
                                       } else {
                                           tabelaVoznji += `<td></td>
                                                                    <td></td>`;
                                       }

                                       if (data[voznja].Komentar.Ocena == "1" || data[voznja].Komentar.Ocena == "2" || data[voznja].Komentar.Ocena == "3" || data[voznja].Komentar.Ocena == "4" || data[voznja].Komentar.Ocena == "5") {
                                           tabelaVoznji += `<td><textarea rows="4" cols="30" disabled>Korisnicko ime:${data[voznja].Komentar.idKorisnik}\nTekst:${data[voznja].Komentar.Opis}\nOcena:${data[voznja].Komentar.Ocena}\nDatum:${data[voznja].Komentar.DatumObjave}</textarea></td>`;

                                       } else {
                                           tabelaVoznji += `<td> </td>`;

                                       }
                                       tabelaVoznji += `<td>${getEnumTipAutomobila(data[voznja].Automobil)}</td>
                                                                <td>${getEnumStatus(data[voznja].StatusVoznje)}</td>
                                                                `;
                                       tabelaVoznji += `<td><button value=${data[voznja].Id} id="prihvatiDugme">Prihvati</button></td></tr>`;

                                   }
                               }

                               tabelaVoznji += "</table>";
                               $("#tabelaVoznjiNaCekanju").html(tabelaVoznji);

                           }



                       }
                   })


               }

            }

            });
        });

    </script>


</head >
<body>
    <nav class="navbar navbar-default" id="naki">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" id="korisnikProfil" href="#"><p id="NaslovK"></p></a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li><a id="pocetnaStranica" href="#">POCETNA</a></li>
                    <li><button class="navbar-toggle, dropbtn" id="dispecerPretraga"><i class="fa fa-search" style="font-size:20px"></i></button></li>
                    <li><a id="dodajVozaca" href="#">DODAJ VOZACA</a></li>
                    <li>
                        <div class="dropdown">
                            <button class="navbar-toggle, dropbtn">
                                <i class="fas fa-car" id="maja" style="font-size:20px"></i>
                            </button>
                            <div class="dropdown-content">
                                <a id="formirajVoznju" href="#">FORMIRAJ VOZNJU</a>
                                <a id="obradiVoznju" href="#">OBRADI VOZNJU</a>
                            </div>
                        </div>
                    </li>
                    <li><a id="naruciVoznju" href="#">NARUCI VOZNJU</a></li>
                    <li><button class="navbar-toggle, dropbtn" id="fitriranjeVoznji"><i class="fa fa-search" style="font-size:20px"></i></button></li>
                    <li><a id="promeniLokaciju" href="#">PROMENI LOKACIJU I AUTO</a></li>
                    <li><a id="odlogovanje" href="#">ODJAVI SE</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="filtriranje">
    </div>
    <div id="tabelaPrikaza" style="margin-left:10px;"></div>
    <div id="pretraga">
    </div>
    <div id="tabelaPretraga" style="margin-left:200px;"></div>


    <!-- First Container -->
    <div id="pocetna1" class="container-fluid bg-1 text-center">
        <h3 class="margin">Dobrodosli!</h3>
       <!-- <img src="flamingo3.jpg" class="img-responsive img-circle margin" style="display:inline" alt="Bird" width="350" height="350">-->
        <h3>064 309 3116</h3>
    </div>
    <!-- Second Container -->

    <div id="profil" style="width:800px; margin:0 auto;">
        PROFIL
    </div>


    <div id="korisnik" style="margin-left:5px;">
        <h3 style="text-align:center;color:#1abc9c;font-weight:bold;">Sve voznje </h3>
        <hr />
        <div id="tabelaVoznji">
        </div>
        <hr />
        <div id="izmenaPojedinacneVoznjeDiv">
        </div>
    </div>
    <div id="dispecer" style="margin-left:5px;">
        <h3 style="text-align:center;color:#1abc9c;font-weight:bold;">Vase voznje</h3>
        <hr />
        <div id="tabelaVoznjiDispecera">
        </div>
        <hr />
        <h3 style="text-align:center;color:#1abc9c;font-weight:bold;">Sve voznje u sistemu </h3>
        <hr />
        <div id="tabelaSvihVoznji">
        </div>
        <hr />
    </div>

    <div id="vozac">
        <h3 style="text-align:center;color:#1abc9c;font-weight:bold;">Vase voznje</h3>
        <hr />
        <div id="tabelaVoznjiVozaca">
        </div>
        <hr />
        <div id="neuspesnaVoznjaKomentarDiv">
        </div>
        <h3 style="text-align:center;color:#1abc9c;font-weight:bold;">Sve voznje koje su na cekanju </h3>
        <hr />
        <div id="tabelaVoznjiNaCekanju">
        </div>

    </div>
    <div id="formiranjeVoznjeDispecer" style="width:800px; margin:0 auto;">
    </div>
    <div id="obradaVoznjeDispecer" style="width:800px; margin:0 auto;">
    </div>
    <div id="odabirVozaca" style="width:800px; margin:0 auto;">
    </div>
    <div id="dodavanjeKorisnikaDiv" style="width:800px; margin:0 auto;">
        DODAJEM KORISNIKA ODJE
    </div>
    <div id="dugmeIzmeni" style="width:800px; margin:0 auto;">
        <br />
        <button id="izmeni">Promeni informacije</button><br />
    </div>
    <div id="dugmeDodajVozaca" style="width:210px; margin:0 auto;">
        <br />
        <button id="subBut">Dodaj vozaca</button>
    </div>
    <div id="promeniLokacijuDiv" style="width:800px; margin:0 auto;">
        <div id="staraLokacija" style="margin-left:5px;"></div>
        <div id="tabelaIzmeniLokaciju"></div>
        <div id="dugmePromeniLokacijuDiv" style="width:800px; margin:0 auto;">
            <button id="promeniLokacijuBut">Promeni</button>
        </div>
        <div id="stariAuto" style="margin-left:5px;"></div>
        <div id="tabelaIzmeniAuto"></div>
    </div>


    <div id="naruciVoznjuDiv" style="width:800px; margin:0 auto;">
        NARUCI VOZNJU
    </div>
    <div id="dugmeNaruciVoznjuDiv" style="width:800px; margin:0 auto;">
        <button id="naruciVoznjuBut">Naruci</button>
    </div>


    <div id="pocetna" class="container-fluid bg-2 text-center">
        <h3 class="margin">What Am I?</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
        <a href="#" class="btn btn-default btn-lg">
            <span class="glyphicon glyphicon-search"></span> Search
        </a>
    </div>
    <br /> <footer class="container-fluid bg-4 text-center">
        <p>All rights reserved-Maja Djordjevic</p>
    </footer>
</body>
</html >